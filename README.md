# brave-alert-app [![Build Status](https://travis-ci.com/bravetechnologycoop/brave-alert-app.svg?branch=main)](https://travis-ci.com/bravetechnologycoop/brave-alert-app)

## How to run locally on an Android emulator

1. Install your Android development environment by following the [React Native CLI Quickstart instructions](https://reactnative.dev/docs/environment-setup)

1. In the project root directory, install/update dependencies:

   ```
   npm install
   ```

1. Open your Android emulator

   1. Open Android Studio
   1. Click "Configure" --> "AVD Manager"
   1. Push the Play arrow in the "Actions" column of the emulator you want to use

1. Run it

   ```
   npm run android
   ```

## How to run locally on an iOS simulator

*** Note *** This will only work on a Mac.

1. Install your iOS development environment by following the [React Native CLI Quickstart instructions](https://reactnative.dev/docs/environment-setup)

1. In the project root directory, install/update dependencies:

   ```
   npm install
   ```

1. Run it

   ```
   npm run ios
   ```

## How to run the tests

1. ```
   npm test
   ```

## How to run the linter

1. ```
   npm run lint
   ```

## How to run Storybook

1. If you are on a Mac, set `STORYBOOK_HOST` to your local IP address in `.env`. For example

   ```
   STORYBOOK_HOST=192.168.0.33
   ```

1. To open Storybook in your browser

   - If you're on a Mac, run

      ```
      STORYBOOK_HOST=<your local IP address> npm run storybook
      ```

   - Otherwise, run
   
      ```
      npm run storybook
      ```

   Note that the components will not appear until after the device has connected.

1. Open the app, run

   ```
   npm run android
   ```

   OR 

   ```
   npm run ios
   ```

1. Open the developer menu by shaking the device or by pressing Command-M on a Mac.

1. Click "Toggle Storybook".

1. Wait for the components to appear in the browser.


# How to add or change an encrypted Travis environment variable

Reference: https://docs.travis-ci.com/user/environment-variables/#encrypting-environment-variables

1. Download the Travis CLI `brew install travis` or `gem install travis`

1. cd to anywhere in this repo

1. For a given `VAR_NAME` that you want to have value `secret_value`, run
   `travis encrypt --pro VAR_NAME=secret_value`
   which will ask for your GitHub username and password and then
   output your encrypted variable

1. Copy the encrypted variable into `.travis.yml`


# Repository organization

- `android/` - Native code for Android. I don't think that we will ever need to edit this directly.
- `ios/` - Native code for iOS. I don't think that we will never need to edit this directly.
- `node_modules/` - Dependency code generated by NPM. Do not edit this directly.
- `src/`
   - `components/` - UI components and their stories.
   - `navigation/` - React Navigation configuration.
   - `redux/` - React-Redux configuration. This controls the app's state by keeping it in the store
      and using reducers for state changes.
   - `resources/` - Static app assets.
      - `images/` - Image files used in the app.
      - `colors.js` - Module for accessing the colours that we use across the app.
      - `images.js` - Module for accessing the images.
   - `screens/` - App screens that are made up of components and are navigated between using
     React Navigation.
   - `storybook/` - Code to make the Storybook UI interface work. `index.js` sometimes needs
     tweaking, but the rest of these files will probably never been edited.
- `.env.example` - An example `.env` file that can be copied and modified to work in
   the different environments.
- `.eslintignore` - Used so that ESLint doesn't look in the `/storybook` directory.
- `.eslintrc.json` - ESLint configuration.
- `.gitignore` - Files that shouldn't be checked into git.
- `.nvmrc` - Specifies the exact version of Node to be used on Travis.
- `.travis.yml` - Travis CI configuration.
- `app.json` - I'm not sure.
- `babel.config.js` - I'm not sure.
- `CHANGELOG.md` - The changelog.
- `index.js` - Entrypoint into the app.
- `LICENSE` - Our open source license.
- `metro.config.js` - Metro JS bundler configuration.
- `package.json` - NPM package definition.
- `package-lock.json` - NPM package description. This is auto-generated and should not be
   edited directly.
- `README.md` - The README.